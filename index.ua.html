<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Maxim Sokhatsky" />
    <title>BPE</title>
    <link rel="stylesheet" href="https://tonpa.guru/blank.css?v=2" />
</head>
<body>
<nav>
    <a href='https://n2o.dev'>DEV</a>
    <a href='https://bpe.n2o.space/index.ua.html' style="background:#ededed;">BPE</a>
    <a href='#' style="background:#ededed;">UA</a>
    <a href='index.html'>EN</a>
</nav>
<header>
    <a href="https://github.com/synrc/bpe"><img src="https://synrc.space/images/Synrc Neo.svg?v=1"></a>
    <h1>BPE</h1>
</header>
<aside>
    <article>
        <section>
            <h3>СИНОПИС</h3>
            <div>
                Бізнес-процеси підприємства, БПП (Business Processing for Enterprises, BPE) — забезпечує інфраструктуру
                для визначення робочих процесів, оркестрування процесів,
                виробничих систем на основі правил, та розподіленого зберігання даних.
            </div>
            <br>
            <div>
                04 JUL 2019 &copy; <a href="https://github.com/5hT">5HT</a> <a href="https://5ht.co/license.htm">ISC</a>
            </div>
        </section>
        <section>
            <h3>МОДУЛІ</h3>
            <div><ul>
                 <li><a href="man/ua/bpe.htm">BPE</a></li>
                 <li><a href="man/ua/task.htm">BPE_TASK</a></li>
                 <li><a href="man/ua/event.htm">BPE_EVENT</a></li>
            </ul></div>
            <br>
            <div>
                JUL 2019 &copy; <a href="https://github.com/5HT">5HT</a> ISC<br>
                VER 6.7 6.5 6.4
            </div>
        </section>
        <section>
        <figure>
        <code>
 $ mad get bpe && cd bpe
 $ mad com pla rep
 > bpe:start(bpe_account:def(),[]).
        </code>
        </figure>
        </section>
    </article>
</aside>
<main>
    <section>

<h3>SESSION</h3>

<figure><pre>
> bpe:start(bpe_account:def(),[]).
Process "1562195753535380000" spawned as <0.139.0>.
{ok,"1562195753535380000"}

> bpe:complete("1562195753535380000").
Process: "1562195753535380000" Task: 'Created' Targets: ['Init']
Target: 'Init' Status: reply Reason: unknown_task
{unknown_task,'Init'}

> bpe:hist("1562195753535380000").
[{hist,{1,"1562195753535380000"},
       feed,[],[],[],[],'IBAN Account',
       {task,'Init'},
       [],
       {{2019,7,4},{2,13,43}}},
 {hist,{0,"1562195753535380000"},
       feed,[],[],[],[],'IBAN Account',
       {task,'Created'},
       [],
       {{2019,7,4},{2,13,7}}}]

> bpe:head("1562195753535380000").
{hist,{1,"1562195753535380000"},
      feed,[],[],[],[],'IBAN Account',
      {task,'Init'},
      [],
      {{2019,7,4},{2,13,43}}}

> supervisor:which_children(bpe_otp).
[{"1562195753535380000",<0.139.0>,worker,[bpe_proc]}]
</pre></figure>

<figure>
    <figcaption>Як дані зберігаються в KVS</figcaption>
<pre>
> kvs:all(writer).
[{writer,"/bpe/proc",1,[],[],[]},
 {writer,"/bpe/hist/1562195753535380000",2,[],[],[]}]

> kvs:get("/bpe/hist/1562195753535380000",{1,"1562195753535380000"}).
{ok,{hist,{1,"1562195753535380000"},
          feed,[],[],[],[],'IBAN Account',
          {task,'Init'},
          [],
          {{2019,7,4},{2,16,7}}}}
</pre></figure>
    </section>
     <section>
<h3>Специфікація BPMN</h3>

<p>Ця схема охоплює 80% всіх робочих процесів та забезпечує лише 20% стандартного покриття.
   Ми називаємо це Легким BPMN, або BPE.</p>

<figure>
    <figcaption>Легкий BPMN</figcaption>
<pre>
-type bst()    :: binary() | string() | atom().
-type procId() :: [] | integer() | {atom(),any()}.
-type histId() :: [] | integer() | {atom()|string(),any()}.

-record(hist,   { id = [] :: histId(),
                  container=feed :: [] | atom(),
                  feed_id=[] :: any(),
                  prev=[] :: [] | integer(),
                  next=[] :: [] | integer(),
                  feeds=[] :: list(),
                  name=[] :: [] | binary(),
                  task=[] :: [] | {atom()|string(),any()},
                  docs=[] :: list(tuple()),
                  time=[] :: term() }).

-type tasks()  :: #task{} | #serviceTask{} | #userTask{}
                | #receiveTask{} | #beginEvent{} | #endEvent{}.

-type events() :: #messageEvent{} | #boundaryEvent{}
                | #timeoutEvent{}.

-record(process,{ id            = [] :: procId(),
                  container   = feed :: [] | atom(),
                  feed_id       = [] :: [] | term(),
                  prev          = [] :: [] | integer(),
                  next          = [] :: [] | integer(),
                  name          = [] :: [] | bst(),
                  feeds         = [] :: list(),
                  roles         = [] :: list(),
                  tasks         = [] :: list(tasks()),
                  events        = [] :: list(events()),
                  hist          = [] :: [] | term(),
                  flows         = [] :: list(#sequenceFlow{}),
                  rules         = [] :: [] | term(),
                  docs          = [] :: list(tuple()),
                  options       = [] :: term(),
                  task          = 'Created' :: [] | atom(),
                  timer         = [] :: [] | reference(),
                  notifications = [] :: [] | term(),
                  result        = [] :: [] | binary(),
                  started       = [] :: [] | calendat:datetime(),
                  beginEvent    = [] :: [] | atom(),
                  endEvent      = [] :: [] | atom()}).
</pre></figure>

    </section>
     <section>

     <h3>ПРИКЛАД</h3>
<figure>
    <figcaption>Приклад визначення процесу</figcaption>
<pre>
-module(bpe_account).
-compile(export_all).
def() ->
  #process { name = 'IBAN Account',
    flows = [
      #sequenceFlow { source='Created',   target='Init'},
      #sequenceFlow { source='Init',      target='Upload'},
      #sequenceFlow { source='Upload',    target='Payment'},
      #sequenceFlow { source='Payment',   target=['Signatory','Process']},
      #sequenceFlow { source='Process',   target=['Process','Final']},
      #sequenceFlow { source='Signatory', target=['Process','Final']} ],
    tasks = [
      #userTask     { name='Init',        module = bpe_account },
      #userTask     { name='Upload',      module = bpe_account },
      #userTask     { name='Signatory',   module = bpe_account },
      #serviceTask  { name='Payment',     module = bpe_account },
      #serviceTask  { name='Process',     module = bpe_account }, 
      #endEvent     { name='Final',       module = bpe_account } ],
    beginEvent = 'Init',
    endEvent = 'Final',
    events = [ #messageEvent{name='PaymentReceived'} ] }.
</pre></figure>
    </section>
     <section>
        <a name=plugin><h3>PRESENCE</h3></a>
        <p>Компанії, які використовують BPE:</p>
        <div>
        <ul>
           <li><a href="https://pb.ua/depozit">pb.ua/depozit</a> &mdash; АТ КБ "ПриватБанк"</li>
           <li><a href="https://nynja.io">nynja.io</a> &mdash; NYNJA, Inc.</li>
           <li><a href="http://quanterall.com">quanterall.com</a> &mdash; Quanterall, OOD.</li>
        </ul></div>
        <br><br>
    </section>
     <section>
        <a name=plugin><h3>CONTRIBUTORS</h3></a>
        <div>
        <ul>
           <li><a href="https://github.com/5HT">5HT</a> &mdash; Namdak Tonpa</li>
        </ul></div>
        <br><br>
    </section>
</main>
<footer>
    Made with <span class="heart">❤</span> to N2O
</footer>
</body>
</html>
